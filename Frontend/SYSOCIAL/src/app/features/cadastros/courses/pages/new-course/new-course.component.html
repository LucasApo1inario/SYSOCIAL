<div class="flex justify-center p-6">
  <div class="bg-white shadow-lg rounded-xl p-8 w-full max-w-1xl">

    <form class="space-y-6" (ngSubmit)="onSubmit()" #createCourseForm="ngForm" autocomplete="off" novalidate>

      <!-- NOME DO CURSO -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <z-form-field>
          <label z-form-label zRequired for="{{ idNome }}">Nome do Curso</label>
          <z-form-control>
            <input
              z-input
              type="text"
              [id]="idNome"
              placeholder="Digite o nome do curso"
              [(ngModel)]="model.nome"
              name="nome"
              required
              minlength="3"
            />
          </z-form-control>

          @if (createCourseForm.submitted && !model.nome) {
            <z-form-message>Nome do curso é obrigatório.</z-form-message>
          }
        </z-form-field>
      </div>

      <!-- VAGAS -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <z-form-field>
          <label z-form-label zRequired for="{{ idVagas }}">Vagas</label>
          <z-form-control>
            <input
              z-input
              type="number"
              [id]="idVagas"
              placeholder="30"
              [(ngModel)]="model.vagas"
              name="vagas"
              required
              min="1"
            />
          </z-form-control>

          @if (createCourseForm.submitted && model.vagas <= 0) {
            <z-form-message>Número de vagas deve ser maior que zero.</z-form-message>
          }
        </z-form-field>
      </div>

      <!-- STATUS -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <z-form-field>
          <label z-form-label for="{{ idStatus }}">Status</label>
          <z-form-control>
            <select z-input [id]="idStatus" [(ngModel)]="model.status" name="status">
              <option value="Ativo">Ativo</option>
              <option value="Inativo">Inativo</option>
            </select>
          </z-form-control>
        </z-form-field>
      </div>

      <!-- TURMAS -->
      <div class="mt-6">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-lg font-semibold">Turmas</h3>

          <button
            z-button
            zType="default"
            type="button"
            (click)="addTurma()"
          >
            Nova Turma
          </button>
        </div>

        <!-- LISTA DE TURMAS -->
        @if (model.turmas?.length) {
          <div class="space-y-3">
            @for (turma of model.turmas; track i; let i = $index) {

              <div class="border p-3 rounded-lg flex items-center justify-between">

                <!-- INFORMAÇÕES DA TURMA -->
                <div>
                  <p class="font-semibold">{{ turma.dia_semana }} - {{ turma.horario_inicio }} - {{turma.horario_fim }}</p>
                  <p class="text-sm text-gray-600">Vagas: {{ turma.vagas_turma }}</p>
                </div>

                <!-- AÇÕES -->
                <div class="flex gap-2">
                  <button
                    z-button
                    zType="ghost"
                    type="button"
                    (click)="editTurma(turma, i)"
                  >
                    Editar
                  </button>

                  <button
                    z-button
                    zType="ghost"
                    class="text-red-600"
                    type="button"
                    (click)="deleteTurma(i)"
                  >
                    Remover
                  </button>
                </div>

              </div>
            }
          </div>
        } @else {
          <p class="text-sm text-gray-500">Nenhuma turma adicionada ainda.</p>
        }
      </div>

      <!-- BOTÕES FINAIS -->
      <div class="flex items-center gap-2 mt-6">
        <button z-button zType="default" type="submit" [disabled]="loading">
          Criar curso
        </button>

        <button z-button zType="ghost" type="button" (click)="reset()" [disabled]="loading">
          Limpar
        </button>

        <button
          z-button
          zType="ghost"
          type="button"
          (click)="return()"
          class="ml-auto"
        >
          Voltar
        </button>

        @if (loading) {
          <span class="ml-2">Enviando...</span>
        }
      </div>
    </form>

  </div>
</div>
