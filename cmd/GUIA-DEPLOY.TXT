cd E:\OneDrive\AsSystem\Fontes\Github\SYSOCIAL\Backend\Services_GO\cmd

####### WINDOWS #########
# Build das imagens
docker build -f api-gateway/Dockerfile -t arthxrlosxno/sysocial:apigatewaye2.1 ../
docker build -f user-service/Dockerfile -t arthxrlosxno/sysocial:userservice2.1 ../
docker build -f auth-service/Dockerfile -t arthxrlosxno/sysocial:authservice2.1 ../

# Push das imagens
docker push  arthxrlosxno/sysocial:apigatewaye2.1
docker push  arthxrlosxno/sysocial:userservice2.1
docker push  arthxrlosxno/sysocial:authservice2.1

###### LINUX #######

# Pull das imagens (no servidor destino)
docker pull  arthxrlosxno/sysocial:apigatewaye2.1
docker pull  arthxrlosxno/sysocial:userservice2.1
docker pull  arthxrlosxno/sysocial:authservice2.1

# Criar rede Docker compartilhada (se nÃ£o existir)
docker network create sysocial-network 2>$null

# Parar e remover containers existentes (se houver)
docker stop apigateway_1 userservice_1 authservice_1 2>$null
docker rm apigateway_1 userservice_1 authservice_1 2>$null

# Subir containers na mesma rede com nomes que o gateway reconhece
docker run -d --name user-service --network sysocial-network -p 8081:8081 arthxrlosxno/sysocial:userservice2.1
docker run -d --name auth-service --network sysocial-network -p 8082:8082 arthxrlosxno/sysocial:authservice2.1
docker run -d --name api-gateway --network sysocial-network -p 8080:8080 arthxrlosxno/sysocial:apigatewaye2.1

# Verificar status
docker ps --filter "name=api-gateway" --filter "name=user-service" --filter "name=auth-service"